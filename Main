#include <stdio.h>
#include <string.h>

#define MAX 101

void ler_numero(char num[], int A[], int *tam, int *negativo);
int soma(int A[], int tamA, int B[], int tamB, int S[]);
int subtracao(int A[], int tamA, int B[], int tamB, int S[], int *neg);
int maior_ou_igual(int A[], int tamA, int B[], int tamB);
void imprime_resultado(int S[], int digitos, int negativo);

int main() {
    
    char num_1 [MAX], num_2 [MAX];
    int A[MAX], B[MAX], S[MAX + 1];
    int ope = 0, negA = 0, negB = 0, digitos = 0, negativo = 0, tamA, tamB;
    
    printf("Digite dois valores inteiros: ");
    scanf("%100s %100s", num_1, num_2);
    
    ler_numero(num_1, A, &tamA, &negA);
    ler_numero(num_2, B, &tamB, &negB);
    
    while(ope!=5){
        printf("Digite um opcao entre 1 e 5:\n Opcao 1 Soma\n Opcao 2 Subtracao\n Opcao 3 Multiplicao\n Opcao 4 Divisao\n Opcao 5 Sair\n");
        scanf("%d", &ope);
        for (int i = 0; i < MAX + 1; i++)
                    S[i] = 0;
        
            if (ope == 1){
                printf("Soma e ");
                
                if(negA == negB){
                    digitos = soma(A, tamA, B, tamB, S);
                    negativo = negA;
                }else{
                    digitos = subtracao(A, tamA, B, tamB, S, &negativo);
                    if (maior_ou_igual(A, tamA, B, tamB))
                    negativo = negA;
                else
                    negativo = negB;
                }
                
                imprime_resultado(S, digitos, negativo);
                
            }else if(ope == 2){
                printf("Subtracao e ");
                
                if (negA != negB) {
                digitos = soma(A, tamA, B, tamB, S);
                negativo = negA;
            } else {
                digitos = subtracao(A, tamA, B, tamB, S, &negativo);
                if (!maior_ou_igual(A, tamA, B, tamB))
                    negativo = !negA;
                else
                    negativo = negA;
            }
                
                imprime_resultado(S, digitos, negativo);
                
            //else if(ope == 3)
                //printf("Multiplicao e %d\n", num_1*num_2);
            //else if(ope == 4){
                //if (num_2 != 0)
                    //printf("Divisao e %d\n", (float)num_1/num_2);
                //else 
                    //("Erro: Divisao por zero\n");
            }else if(ope == 5)
                printf("Operação encerrada\n");
            else
                printf("Operacao invalida\n");
    }
    
    return 0;
}
